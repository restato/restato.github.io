---
title: "Google Search Console에서 Sitemap을 못 가져올 때"
description: "sitemap-index.xml 가져올 수 없음 오류의 원인과 해결 방법"
date: 2026-01-16
tags: ["seo", "astro", "troubleshooting"]
---

Google Search Console에서 "가져올 수 없음" 에러가 떴다. sitemap 설정은 분명히 제대로 해놨는데.

## 문제 상황

Astro 블로그에 `@astrojs/sitemap` 플러그인을 설정해두고, robots.txt에도 sitemap 경로를 명시했다.

```txt
Sitemap: https://restato.github.io/sitemap-index.xml
```

그런데 Search Console에서 sitemap을 제출하니까 "가져올 수 없음"이라고 나왔다.

## 원인 파악

`npm run build`를 돌려보니 바로 에러가 터졌다.

```
[vite]: Rollup failed to resolve import "@imgly/background-removal"
```

빌드가 실패하면 sitemap이 생성되지 않고, GitHub Actions 배포도 실패한다. 결국 Google이 접근할 sitemap 파일 자체가 없었던 것.

## 해결

`astro.config.mjs`에서 문제의 모듈을 external로 추가했다.

```js
vite: {
  build: {
    rollupOptions: {
      external: [
        '@imgly/background-removal',  // 이거 추가
        'onnxruntime-web',
        'onnxruntime-web/webgpu',
      ],
    },
  },
},
```

추가로 sitemap에 `lastmod`도 넣어줬다. Google이 크롤링 우선순위를 정하는 데 도움이 된다.

```js
sitemap({
  serialize(item) {
    item.lastmod = new Date().toISOString();
    return item;
  },
}),
```

## 교훈

Search Console에서 sitemap 오류가 나면 일단 **빌드가 성공하는지부터** 확인하자. 설정 파일만 뚫어지게 쳐다봤는데, 정작 빌드 자체가 실패하고 있었다.
