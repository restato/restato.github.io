---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects'))
  .sort((a, b) => a.data.order - b.data.order);

// Hardcoded projects for now (can be moved to content collection later)
const builtInProjects = [
  {
    slug: 'games',
    title: 'ê²Œì„ì„¼í„°',
    description: 'ì¬ë¯¸ìˆëŠ” ë¯¸ë‹ˆê²Œì„ ëª¨ìŒ',
    icon: 'ğŸ®',
    tags: ['Games', 'Interactive', 'Fun'],
    featured: true,
  },
  {
    slug: 'roulette',
    title: 'ë£°ë ›',
    description: 'ì»¤ìŠ¤í…€ í•­ëª©ìœ¼ë¡œ ëŒë¦¬ëŠ” ëœë¤ ë£°ë › ê²Œì„',
    icon: 'ğŸ¡',
    tags: ['React', 'Animation'],
  },
  {
    slug: 'slot-machine',
    title: 'ìŠ¬ë¡¯ë¨¸ì‹ ',
    description: 'í–‰ìš´ì˜ 777ì„ ë…¸ë ¤ë³´ì„¸ìš”!',
    icon: 'ğŸ°',
    tags: ['React', 'Game'],
  },
  {
    slug: 'rock-paper-scissors',
    title: 'ê°€ìœ„ë°”ìœ„ë³´',
    description: 'AIì™€ ëŒ€ê²°í•˜ëŠ” ê°€ìœ„ë°”ìœ„ë³´',
    icon: 'âœŠ',
    tags: ['React', 'AI'],
  },
  {
    slug: 'number-guess',
    title: 'ìˆ«ì ë§ì¶”ê¸°',
    description: 'Up & Down ìˆ«ì ë§ì¶”ê¸° ê²Œì„',
    icon: 'ğŸ”¢',
    tags: ['React', 'Puzzle'],
  },
  {
    slug: 'memory-game',
    title: 'ê¸°ì–µë ¥ ê²Œì„',
    description: 'ì¹´ë“œ ì§ ë§ì¶”ê¸° ë‘ë‡Œ ê²Œì„',
    icon: 'ğŸ§ ',
    tags: ['React', 'Brain'],
  },
  {
    slug: 'reaction-test',
    title: 'ë°˜ì‘ì†ë„',
    description: 'ë‹¹ì‹ ì˜ ë°˜ì‘ì†ë„ë¥¼ ì¸¡ì •í•˜ì„¸ìš”',
    icon: 'âš¡',
    tags: ['React', 'Test'],
  },
  {
    slug: 'gallery',
    title: 'ê°¤ëŸ¬ë¦¬',
    description: 'ì‚¬ì§„ ê°¤ëŸ¬ë¦¬',
    icon: 'ğŸ“·',
    tags: ['Gallery', 'Lightbox'],
  },
];
---

<MainLayout title="í”„ë¡œì íŠ¸ | Restato" description="Claudeì™€ í•¨ê»˜ ë§Œë“  í”„ë¡œì íŠ¸ë“¤">
  <section class="py-16 px-4">
    <div class="max-w-5xl mx-auto">
      <!-- Header -->
      <div class="mb-12">
        <h1 class="text-4xl font-bold mb-4">í”„ë¡œì íŠ¸</h1>
        <p class="text-xl text-[var(--color-text-muted)]">
          Claudeì™€ í•¨ê»˜ ë§Œë“  ë‹¤ì–‘í•œ í”„ë¡œì íŠ¸ë“¤
        </p>
      </div>

      <!-- Projects Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {builtInProjects.map((project) => (
          <a
            href={`/projects/${project.slug}`}
            class="card group hover:border-primary-500/50"
          >
            <div class="text-5xl mb-4">{project.icon}</div>
            <h3 class="text-xl font-bold mb-2 group-hover:text-primary-500 transition-colors">
              {project.title}
            </h3>
            <p class="text-[var(--color-text-muted)] mb-4">
              {project.description}
            </p>
            <div class="flex flex-wrap gap-2">
              {project.tags.map((tag) => (
                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-border)] text-[var(--color-text-muted)]">
                  {tag}
                </span>
              ))}
            </div>
          </a>
        ))}

        {projects.map((project) => (
          <a
            href={project.data.url || `/projects/${project.slug}`}
            class="card group hover:border-primary-500/50"
            target={project.data.url ? '_blank' : undefined}
            rel={project.data.url ? 'noopener noreferrer' : undefined}
          >
            {project.data.image ? (
              <img
                src={project.data.image}
                alt={project.data.title}
                class="w-full h-40 object-cover rounded-lg mb-4 -mt-2"
              />
            ) : (
              <div class="text-5xl mb-4">ğŸš€</div>
            )}
            <h3 class="text-xl font-bold mb-2 group-hover:text-primary-500 transition-colors">
              {project.data.title}
            </h3>
            <p class="text-[var(--color-text-muted)] mb-4">
              {project.data.description}
            </p>
            <div class="flex flex-wrap gap-2">
              {project.data.tags.map((tag: string) => (
                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-border)] text-[var(--color-text-muted)]">
                  {tag}
                </span>
              ))}
            </div>
          </a>
        ))}

        <!-- Add New Project Card -->
        <div class="card border-dashed flex flex-col items-center justify-center text-center opacity-60 hover:opacity-100 transition-opacity">
          <div class="text-4xl mb-4">âœ¨</div>
          <h3 class="text-lg font-bold mb-2">ìƒˆ í”„ë¡œì íŠ¸</h3>
          <p class="text-sm text-[var(--color-text-muted)]">
            Coming Soon...
          </p>
        </div>
      </div>
    </div>
  </section>
</MainLayout>
