---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import { ProjectsHeader, ProjectsGrid, NewProjectCard } from '../../components/ProjectsContent';

const projects = (await getCollection('projects'))
  .sort((a, b) => a.data.order - b.data.order);
---

<MainLayout title="í”„ë¡œì íŠ¸ | Restato" description="Claudeì™€ í•¨ê»˜ ë§Œë“  í”„ë¡œì íŠ¸ë“¤">
  <section class="py-16 px-4">
    <div class="max-w-5xl mx-auto">
      <!-- Header -->
      <ProjectsHeader client:load />

      <!-- Projects Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <ProjectsGrid client:load />

        {projects.map((project) => (
          <a
            href={project.data.url || `/projects/${project.slug}`}
            class="card group hover:border-primary-500/50"
            target={project.data.url ? '_blank' : undefined}
            rel={project.data.url ? 'noopener noreferrer' : undefined}
          >
            {project.data.image ? (
              <img
                src={project.data.image}
                alt={project.data.title}
                class="w-full h-40 object-cover rounded-lg mb-4 -mt-2"
              />
            ) : (
              <div class="text-5xl mb-4">ðŸš€</div>
            )}
            <h3 class="text-xl font-bold mb-2 group-hover:text-primary-500 transition-colors">
              {project.data.title}
            </h3>
            <p class="text-[var(--color-text-muted)] mb-4">
              {project.data.description}
            </p>
            <div class="flex flex-wrap gap-2">
              {project.data.tags.map((tag: string) => (
                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-border)] text-[var(--color-text-muted)]">
                  {tag}
                </span>
              ))}
            </div>
          </a>
        ))}

        <!-- Add New Project Card -->
        <NewProjectCard client:load />
      </div>
    </div>
  </section>
</MainLayout>
